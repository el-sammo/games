<div class="modal-header">
  <h3 class="modal-title" id="nav-away-modal-title">
		Checkout
  </h3>
</div>
<div class="modal-body">
	<form name="checkoutForm">
		<div class="row" ng-show="paymentFailed">
			<div class="col-md-12">
				<span class="error"><strong>Your card was not processed successfully. Please refresh this page and try again or call us at 234-GRUB (234-4782)</strong>.</span><br/>
			</div>
		</div>
		<div class="row no-margin">
			<h4>Select Your Payment Method</h4>
			<div class="radio" ng-repeat="method in checkoutPaymentMethods">
				<label>
					<input type="radio" name="method" ng-value="method.id" ng-model="$parent.selMethod">
					{{method.lastFour}}
				</label>
			</div>
		</div>

		<div ng-show="selMethod === 'newCard'" class="form-section">
			<ng-include src="'/templates/addPMInputs.html'"></ng-include>
		</div>

		<div ng-show="selMethod !== 'newCard'" class="form-section">
			<div class="row">
				<div class="col-md-4">
					<span class="gratuityLabel">Driver Tip?</span>
				</div>
				<div class="col-md-8">
					<input 
						type="number" name="gratuity" class="form-control col-md-10"
						ng-model="gratuity" ng-blur="updateTotal()" id="gratuity"
					>
				</div>
			</div>
			<br/>
			<div class="row">
				<div class="col-md-4">
					<span class="promoLabel">Promo Code?</span>
				</div>
				<div class="col-md-8">
					<input 
						type="text" class="form-control col-md-10" placeholder=""
						ng-model="promo" ng-blur="updateTotal()" id="promo"
					>
				</div>
			</div>
			<div class="row" ng-show="!validCode">
				<div class="col-md-12">
					<span class="error">The promo code entered was not found. Please try again.</span>
				</div>
			</div>
			<div class="row" ng-show="validCode && codeEffect">
				<div class="col-md-12">
					<span class="awesome">{{codeEffect}}</span>
				</div>
			</div>
			<br/>
			<div class="row">
				<div class="col-md-4">
					<span class="totalLabel">Current Total</span>
				</div>
				<div class="col-md-4 col-md-offset-4" style="text-align: right;">
					<span class="currentTotal">{{currentTotal}}</span>
				</div>
			</div>
		</div>
		<div class="form-section" ng-show="selMethod !== 'newCard'">
			<div class="row">
				<div class="col-md-4">
					<span class="gratuityLabel">Delivery Instructions?</span>
				</div>
				<div class="col-md-8">
					<input 
						type="text" name="specDelInstr" class="form-control col-md-10"
						ng-model="specDelInstr" id="specDelInstr"
					>
				</div>
			</div>
		</div>
	</form>
</div>
<div class="modal-footer">
	<div ng-show="selMethod !== 'newCard'">
		<button type="button" class="btn btn-primary pull-left" ng-click="$close('discard')">
			<i class="fa fa-reply"></i> &nbsp; Go Back
		</button>
		<button type="button" class="btn btn-success pull-right" ng-click="checkout()" ng-disabled="!selMethod">
			<i class="fa fa-lock"></i> &nbsp; Checkout
		</button>
	</div>
	<div ng-show="selMethod === 'newCard'">
		<button type="button" class="btn btn-primary pull-left" ng-click="selMethod = ''">
			<i class="fa fa-reply"></i> &nbsp; Go Back
		</button>
		<button type="button" class="btn btn-success pull-right" ng-click="addPM()" ng-disabled="!selMethod || !payMethod.cardNumber || !payMethod.month || !payMethod.year || !payMethod.cvv2">
		 	Next &nbsp; <i class="fa fa-chevron-right"></i>
		</button>
	</div>
</div>
